<html>
    <head>
        <meta charset="utf-8">
        <link href="https://fonts.googleapis.com/css?family=Averia+Libre|Metamorphous" rel="stylesheet"> 
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" type="text/css" href="css/classic.css">
    </head>
    <body>
		<div class="page">
			<div id="classname">The Barbarian</div>
			<img id="background" src="images/background.png">
			<div id="name"></div>
			<!--<div id="level"></div>
			<div id="xp"></div> -->

			<div id="look">
				<div class="header">LOOK</div>
				<span class="hint" >Choose one for each or write your own:</span>
			</div>
			<div id="armor_block">
				<div class="header">ARMOR</div>
				<img src="images/dw_armor.svg">
				<div id="armor"></div>
			</div>

			<div id="hit_points">
				<div class="header">HIT POINTS</div>
				<img src="images/dw_heart.svg">
				<div id="hp_current"></div>
				<div id="hp_max"></div>
			</div>

			<div id="damage">
				<div class="header">DAMAGE</div>
				<img src="images/dw_dice.svg">
			</div>
			<!--

			<div id="alignment">
				<div class="header">ALIGNMENT</div>
			</div>

			<div id='stats'>
				<div>Strength<input type=text></div>
				<div>Dexterity<input type=text></div>
				<div>Constitution<input type=text></div>
				<div>Intelligence<input type=text></div>
				<div>Wisdom<input type=text></div>
				<div>Charisma<input type=text></div>
			</div>

			<div id='bonds'>
				<div class="header">BONDS</div>
			</div>
			
			<div id='moves'>
				<div class="header">STARTING MOVES</div>
			</div> -->
		<div>
        <script>
            var json = undefined;
            $.getJSON( 'charactersheets/barbarian.json', function( data ) {
                json = data; 
                $( '#name' ).text( data[ 'name' ] );
                $( '#level' ).text( data[ 'level' ] );
                $( '#xp' ).text( data[ 'xp' ] );
                $( '#armor' ).text( data[ 'armor' ] );
                $( '#hp_current' ).text( data[ 'hit points' ][ 0 ] || 0 );
                $( '#hp_max' ).text( data[ 'hit points' ][ 1 ] || 0 );

                var looks = data.class.look;
                var lookElement = $( '#look' );
                var keys = Object.keys( looks );

                for( var index in  keys ) {
                    var key = keys[ index ];
                    var look = looks[ key ];
					var look_str = look.join( ", " );
                    lookElement.append( '<div class="keys">' + key + ':<input class="input" type="text" placeholder="' + look_str + '"></div>' )
                };

				var alignments = data.class.alignment;
				var alignment_keys = Object.keys( alignments );
				var alignmentElement = $( '#alignment' );
				for( var index in alignment_keys ) {
					var key = alignment_keys[ index ];
					var desc = alignments[ key ];
					alignmentElement.append( '<div><span class="keys">' + key + '</span><span>' + desc + '</span></div>' ); 
				}

				var bonds = data.class.bonds;
				var bondElement = $( '#bonds' );
				for( var index in bonds ) {
					var bond = bonds[ index ];
					bondElement.append( '<div>' + bond.replace( '____', '<input type=text>' ) + '</div>' );
				}
				bondElement.append( '<div><input type=text></div>' );

				var moves = data.class.moves;
				var move_keys = Object.keys( moves );
				var movesElement = $( '#moves' );
				var reg = /\*([^*]*)\*/;
				for( var index in move_keys ) {
					var key = move_keys[ index ];
					var move_ = moves[ key ];
					var default_ = move_.default;
					if( move_[ 'level requirement' ] === undefined ) {
						movesElement.append( '<div><div class="keys"><input type="checkbox" ' + ( default_ !== undefined ? 'disabled checked' : '' ) + '>' + key + '</div><div>' + move_.description.replace( reg, function( match, x ) { return "<b>"+x+"</b>" } ) + '</div></div>' );
					}
				}
            } );
        </script>
    </body>
</html>
